const a20_0x2131d3=a20_0x480d;(function(_0x36e170,_0x3b8895){const _0x14deb8=a20_0x480d,_0x3c2af7=_0x36e170();while(!![]){try{const _0x2e98a7=parseInt(_0x14deb8(0x1fa))/0x1*(-parseInt(_0x14deb8(0x1eb))/0x2)+parseInt(_0x14deb8(0x20d))/0x3+-parseInt(_0x14deb8(0x1df))/0x4+-parseInt(_0x14deb8(0x1c8))/0x5+-parseInt(_0x14deb8(0x211))/0x6*(-parseInt(_0x14deb8(0x1b5))/0x7)+-parseInt(_0x14deb8(0x1c7))/0x8+parseInt(_0x14deb8(0x1fe))/0x9*(parseInt(_0x14deb8(0x205))/0xa);if(_0x2e98a7===_0x3b8895)break;else _0x3c2af7['push'](_0x3c2af7['shift']());}catch(_0x361edc){_0x3c2af7['push'](_0x3c2af7['shift']());}}}(a20_0x2a45,0x75d99));function a20_0x2a45(){const _0x308e93=['iCXjP','Shutdown-Queue','1lrQJoZ','SFKHf','HNnhn','TEST_SCREENSHOT','9vxKJKk','dYQil','kind','TestRunStarted','includes','VxNht','GgdxH','16633490ylrfXI','rBoPW','fAVAg','NqFvc','QMiNz','glZek','push','wzwqE','1293678aXDhFG','odfOR','api/v1/batch','qakuI','933102VxZdIS','api/v1/screenshots','GRvNb','length','./constants','proceedWithData','grRgC','pollEventBatchInterval','TestRunFinished','wzFhV','qiBKV','proceedWithUrl','IfPJG','7NPNPlF','HookRunStarted','started','slice','eventUrl','uyIRG','RESETTING','dRmAA','MBgFp','EeKlY','aXGpV','CWYRD','MZExk','zgxWX','split','XNgIk','VptHi','ctKLb','4486936qowgBh','582105nZuPVR','WBaXZ','VyIuG','xXJWe','queue','resetEventBatchPolling','./helper','startEventBatchPolling','Mnwfj','TbiLq','iKyDR','ZoicN','add','xdSAy','TBsAg','LogCreated','YYQWa','shouldProceed','qGnvl','HookRunFinished','screenshotEventUrl','BATCH_EVENT_TYPES','BLPCe','1401972WJXyvA','uiviL','SeToa','UeZXv','VSfQT','1|3|5|2|0|4','MkbfL','KzhVu','event_type','shutdown','zBeWf','NOcgd','1479196CCQHOZ','KfAgB','removeEventBatchPolling','REMOVING','kzuTd','zcUgX','Interval-Queue','eYGXq','splice','logs','GQcpB','cGatP','GArNU'];a20_0x2a45=function(){return _0x308e93;};return a20_0x2a45();}const {BATCH_SIZE,BATCH_INTERVAL,consoleHolder}=require(a20_0x2131d3(0x1ac)),{debug,batchAndPostEvents}=require(a20_0x2131d3(0x1ce));function a20_0x480d(_0x1c3a8,_0x1a0e82){const _0x2a45e6=a20_0x2a45();return a20_0x480d=function(_0x480d69,_0x39dc3f){_0x480d69=_0x480d69-0x1a9;let _0x3597ec=_0x2a45e6[_0x480d69];return _0x3597ec;},a20_0x480d(_0x1c3a8,_0x1a0e82);}class RequestQueueHandler{constructor(){const _0x241f2d=a20_0x2131d3,_0x53d39e={};_0x53d39e[_0x241f2d(0x1f5)]=_0x241f2d(0x1e4),_0x53d39e[_0x241f2d(0x1c1)]=_0x241f2d(0x1d7),_0x53d39e['fEnaY']='CBTSessionCreated',_0x53d39e[_0x241f2d(0x1e2)]=_0x241f2d(0x1b0),_0x53d39e[_0x241f2d(0x207)]='TestRunSkipped',_0x53d39e['VptHi']=_0x241f2d(0x1db),_0x53d39e[_0x241f2d(0x1e1)]=_0x241f2d(0x201),_0x53d39e[_0x241f2d(0x206)]=_0x241f2d(0x1b6),_0x53d39e[_0x241f2d(0x1f8)]=_0x241f2d(0x1a9),_0x53d39e[_0x241f2d(0x1d2)]=_0x241f2d(0x20f);const _0x34a973=_0x53d39e,_0x29a864=_0x34a973[_0x241f2d(0x1f5)][_0x241f2d(0x1c3)]('|');let _0x453630=0x0;while(!![]){switch(_0x29a864[_0x453630++]){case'0':this[_0x241f2d(0x1dd)]=[_0x34a973['MZExk'],_0x34a973['fEnaY'],_0x34a973[_0x241f2d(0x1e2)],_0x34a973[_0x241f2d(0x207)],_0x34a973[_0x241f2d(0x1c5)],_0x34a973[_0x241f2d(0x1e1)],_0x34a973[_0x241f2d(0x206)]];continue;case'1':this[_0x241f2d(0x1cc)]=[];continue;case'2':this[_0x241f2d(0x1dc)]=_0x34a973['iCXjP'];continue;case'3':this[_0x241f2d(0x1b7)]=![];continue;case'4':this[_0x241f2d(0x1af)]=null;continue;case'5':this[_0x241f2d(0x1b9)]=_0x34a973[_0x241f2d(0x1d2)];continue;}break;}}['start']=()=>{const _0x2812f4=a20_0x2131d3,_0x500bc6={};_0x500bc6[_0x2812f4(0x1cb)]=function(_0x3b450a,_0x339640){return _0x3b450a>=_0x339640;},_0x500bc6[_0x2812f4(0x1fb)]=function(_0x1be385,_0x284ae6){return _0x1be385!==_0x284ae6;},_0x500bc6[_0x2812f4(0x1c6)]=_0x2812f4(0x1f2),_0x500bc6['oGhpO']=_0x2812f4(0x1f0);const _0x4356d3=_0x500bc6;if(!this[_0x2812f4(0x1b7)]){if(_0x4356d3['SFKHf'](_0x4356d3[_0x2812f4(0x1c6)],_0x4356d3['oGhpO']))this[_0x2812f4(0x1b7)]=!![],this[_0x2812f4(0x1cf)]();else return _0x4356d3[_0x2812f4(0x1cb)](this['queue'][_0x2812f4(0x1ab)],_0xf77d0e);}};[a20_0x2131d3(0x1d4)]=_0x4c5fae=>{const _0x88ec80=a20_0x2131d3,_0x5a20c3={'wzwqE':'RESETTING','HNnhn':function(_0x2b0e5f,_0x11187d){return _0x2b0e5f(_0x11187d);},'GRvNb':function(_0x2ad21a,_0x3d0e89){return _0x2ad21a===_0x3d0e89;},'GgdxH':_0x88ec80(0x1ee),'qGnvl':function(_0x2ada54,_0x5aa0dc){return _0x2ada54===_0x5aa0dc;},'CWYRD':_0x88ec80(0x1d5),'vjbDJ':function(_0x4a7b58,_0x3288db){return _0x4a7b58===_0x3288db;},'IfPJG':_0x88ec80(0x1fd),'dOxIP':function(_0x500004,_0x6ceb8a){return _0x500004!==_0x6ceb8a;},'WBaXZ':_0x88ec80(0x1d8),'XNgIk':function(_0x5e68fe,_0x4e6543){return _0x5e68fe!==_0x4e6543;},'uyIRG':_0x88ec80(0x1b1),'qakuI':_0x88ec80(0x20e),'NOcgd':'kswEV','EeKlY':_0x88ec80(0x1f7)};if(this[_0x88ec80(0x1dd)][_0x88ec80(0x202)](_0x4c5fae[_0x88ec80(0x1e7)])){if(_0x5a20c3[_0x88ec80(0x1da)](_0x5a20c3[_0x88ec80(0x1c0)],_0x5a20c3[_0x88ec80(0x1c0)])){if(_0x4c5fae['logs']&&_0x4c5fae[_0x88ec80(0x1f4)][0x0]&&_0x5a20c3['vjbDJ'](_0x4c5fae['logs'][0x0][_0x88ec80(0x200)],_0x5a20c3[_0x88ec80(0x1b4)])){if(_0x5a20c3['dOxIP'](_0x5a20c3[_0x88ec80(0x1c9)],_0x5a20c3[_0x88ec80(0x1c9)]))_0x6dca65=this[_0x88ec80(0x1cc)][_0x88ec80(0x1b8)](0x0,_0x2705b6),this[_0x88ec80(0x1cc)][_0x88ec80(0x1f3)](0x0,_0x275d38),this[_0x88ec80(0x1cd)]();else{const _0x42aa27={};return _0x42aa27['shouldProceed']=!![],_0x42aa27[_0x88ec80(0x1ad)]=[_0x4c5fae],_0x42aa27['proceedWithUrl']=this['screenshotEventUrl'],_0x42aa27;}}this['queue'][_0x88ec80(0x20b)](_0x4c5fae);let _0x3f3cc8=null,_0x4e3dd9=this[_0x88ec80(0x1d9)]();_0x4e3dd9&&(_0x5a20c3[_0x88ec80(0x1c4)](_0x5a20c3[_0x88ec80(0x1ba)],_0x5a20c3[_0x88ec80(0x210)])?(_0x3f3cc8=this['queue'][_0x88ec80(0x1b8)](0x0,BATCH_SIZE),this[_0x88ec80(0x1cc)]['splice'](0x0,BATCH_SIZE),this[_0x88ec80(0x1cd)]()):(this[_0x88ec80(0x1ed)](_0x5a20c3[_0x88ec80(0x20c)]),this[_0x88ec80(0x1cf)]()));const _0x34ed14={};return _0x34ed14['shouldProceed']=_0x4e3dd9,_0x34ed14['proceedWithData']=_0x3f3cc8,_0x34ed14[_0x88ec80(0x1b3)]=this['eventUrl'],_0x34ed14;}else this['started']=!![],this[_0x88ec80(0x1cf)]();}else{if(_0x5a20c3[_0x88ec80(0x1da)](_0x5a20c3[_0x88ec80(0x1ea)],_0x5a20c3[_0x88ec80(0x1be)])){_0x5a20c3[_0x88ec80(0x1fc)](_0x456922,this[_0x88ec80(0x1af)]),this[_0x88ec80(0x1af)]=null;if(_0x5a20c3[_0x88ec80(0x1aa)](_0x4b2aa8,_0x5a20c3[_0x88ec80(0x204)]))this[_0x88ec80(0x1b7)]=![];}else{const _0x3e9035={};return _0x3e9035[_0x88ec80(0x1d9)]=!![],_0x3e9035;}}};[a20_0x2131d3(0x1e8)]=async()=>{const _0x32f81a=a20_0x2131d3,_0xefbf6d={'dMvtp':function(_0x11de82,_0x14d7c9){return _0x11de82(_0x14d7c9);},'KzhVu':function(_0x52fb10,_0x11148e){return _0x52fb10===_0x11148e;},'VxNht':_0x32f81a(0x1ee),'TgxvO':function(_0x5414c9,_0x4eaffb){return _0x5414c9>_0x4eaffb;},'VyIuG':function(_0x1362ef,_0x418a50){return _0x1362ef!==_0x418a50;},'ZoicN':'GHwtw','jeqSA':function(_0x5d4b96,_0x2c992e,_0x37515d,_0x61a868){return _0x5d4b96(_0x2c992e,_0x37515d,_0x61a868);},'BLPCe':_0x32f81a(0x1f9)};this[_0x32f81a(0x1ed)](_0xefbf6d['VxNht']);while(_0xefbf6d['TgxvO'](this['queue']['length'],0x0)){if(_0xefbf6d[_0x32f81a(0x1ca)](_0xefbf6d[_0x32f81a(0x1d3)],_0xefbf6d[_0x32f81a(0x1d3)])){if(this['pollEventBatchInterval']){_0xefbf6d['dMvtp'](_0x5cc377,this[_0x32f81a(0x1af)]),this[_0x32f81a(0x1af)]=null;if(_0xefbf6d[_0x32f81a(0x1e6)](_0x55a767,_0xefbf6d[_0x32f81a(0x203)]))this[_0x32f81a(0x1b7)]=![];}}else{const _0x5a72f3=this[_0x32f81a(0x1cc)][_0x32f81a(0x1b8)](0x0,BATCH_SIZE);this[_0x32f81a(0x1cc)][_0x32f81a(0x1f3)](0x0,BATCH_SIZE),await _0xefbf6d['jeqSA'](batchAndPostEvents,this[_0x32f81a(0x1b9)],_0xefbf6d[_0x32f81a(0x1de)],_0x5a72f3);}}};[a20_0x2131d3(0x1cf)]=()=>{const _0x1fea56=a20_0x2131d3,_0x35672a={'glZek':function(_0x23bfc2,_0x3476f5){return _0x23bfc2===_0x3476f5;},'TBsAg':_0x1fea56(0x1fd),'QMiNz':_0x1fea56(0x1bd),'qiBKV':function(_0x2e00b7,_0x180ff1){return _0x2e00b7>_0x180ff1;},'zBeWf':'RqFIn','uiviL':function(_0x385b1f,_0x1b363d,_0x32bd4f,_0x4df8d1){return _0x385b1f(_0x1b363d,_0x32bd4f,_0x4df8d1);},'Mnwfj':_0x1fea56(0x1f1),'dAbUg':function(_0x449635,_0x5c0050,_0x15db51){return _0x449635(_0x5c0050,_0x15db51);}};this['pollEventBatchInterval']=_0x35672a['dAbUg'](setInterval,async()=>{const _0x2624a5=_0x1fea56,_0x4d7818={'kzuTd':function(_0x53fa41,_0x2dc9b1){return _0x35672a['glZek'](_0x53fa41,_0x2dc9b1);},'zgxWX':_0x35672a[_0x2624a5(0x1d6)]};if(_0x35672a['glZek'](_0x35672a['QMiNz'],_0x35672a[_0x2624a5(0x209)])){if(_0x35672a[_0x2624a5(0x1b2)](this[_0x2624a5(0x1cc)][_0x2624a5(0x1ab)],0x0)){if(_0x35672a[_0x2624a5(0x20a)](_0x35672a[_0x2624a5(0x1e9)],_0x35672a[_0x2624a5(0x1e9)])){const _0x4157fc=this[_0x2624a5(0x1cc)]['slice'](0x0,BATCH_SIZE);this[_0x2624a5(0x1cc)][_0x2624a5(0x1f3)](0x0,BATCH_SIZE),await _0x35672a[_0x2624a5(0x1e0)](batchAndPostEvents,this[_0x2624a5(0x1b9)],_0x35672a[_0x2624a5(0x1d0)],_0x4157fc);}else{if(_0x41d3ea[_0x2624a5(0x1f4)]&&_0x132d4d[_0x2624a5(0x1f4)][0x0]&&_0x4d7818[_0x2624a5(0x1ef)](_0x2076c6[_0x2624a5(0x1f4)][0x0][_0x2624a5(0x200)],_0x4d7818[_0x2624a5(0x1c2)])){const _0x16eb1b={};return _0x16eb1b[_0x2624a5(0x1d9)]=!![],_0x16eb1b['proceedWithData']=[_0x3e4858],_0x16eb1b['proceedWithUrl']=this['screenshotEventUrl'],_0x16eb1b;}this['queue'][_0x2624a5(0x20b)](_0x48d4d8);let _0x5a87a0=null,_0x2b6a38=this[_0x2624a5(0x1d9)]();_0x2b6a38&&(_0x5a87a0=this[_0x2624a5(0x1cc)][_0x2624a5(0x1b8)](0x0,_0xa7bac0),this[_0x2624a5(0x1cc)][_0x2624a5(0x1f3)](0x0,_0x1a55d2),this[_0x2624a5(0x1cd)]());const _0x32bee3={};return _0x32bee3[_0x2624a5(0x1d9)]=_0x2b6a38,_0x32bee3[_0x2624a5(0x1ad)]=_0x5a87a0,_0x32bee3[_0x2624a5(0x1b3)]=this[_0x2624a5(0x1b9)],_0x32bee3;}}}else!this['started']&&(this[_0x2624a5(0x1b7)]=!![],this[_0x2624a5(0x1cf)]());},BATCH_INTERVAL);};[a20_0x2131d3(0x1cd)]=()=>{const _0x50bfb7=a20_0x2131d3,_0x128afc={};_0x128afc[_0x50bfb7(0x1ae)]=_0x50bfb7(0x1bb);const _0xb5eb4b=_0x128afc;this[_0x50bfb7(0x1ed)](_0xb5eb4b[_0x50bfb7(0x1ae)]),this['startEventBatchPolling']();};[a20_0x2131d3(0x1ed)]=_0x388b53=>{const _0x327a2b=a20_0x2131d3,_0x2781b9={'aXGpV':function(_0x5a5754,_0x3dd267){return _0x5a5754!==_0x3dd267;},'dYQil':_0x327a2b(0x1bc),'MkbfL':_0x327a2b(0x1ec),'VSfQT':function(_0x3bc62d,_0x269083){return _0x3bc62d(_0x269083);},'NqFvc':function(_0x467808,_0x5e0a78){return _0x467808===_0x5e0a78;},'cGatP':_0x327a2b(0x1ee)};if(this[_0x327a2b(0x1af)]){if(_0x2781b9[_0x327a2b(0x1bf)](_0x2781b9[_0x327a2b(0x1ff)],_0x2781b9[_0x327a2b(0x1e5)])){_0x2781b9[_0x327a2b(0x1e3)](clearInterval,this[_0x327a2b(0x1af)]),this[_0x327a2b(0x1af)]=null;if(_0x2781b9[_0x327a2b(0x208)](_0x388b53,_0x2781b9[_0x327a2b(0x1f6)]))this[_0x327a2b(0x1b7)]=![];}else{const _0x28863f={};return _0x28863f[_0x327a2b(0x1d9)]=!![],_0x28863f;}}};[a20_0x2131d3(0x1d9)]=()=>{const _0x492f27=a20_0x2131d3,_0x45c851={};_0x45c851[_0x492f27(0x1d1)]=function(_0x188e80,_0x2f02af){return _0x188e80>=_0x2f02af;};const _0x30c679=_0x45c851;return _0x30c679['TbiLq'](this[_0x492f27(0x1cc)][_0x492f27(0x1ab)],BATCH_SIZE);};}module['exports']=RequestQueueHandler;